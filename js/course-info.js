function esunCalendarConfig(e){var a=[{course:1,level:1,year:2016,month:11,day:9,title:"Курс Brow Master \n Уровень сложности 1"},{course:1,level:2,year:2016,month:11,day:10,title:"Курс Brow Master \n Уровень сложности 2"},{course:1,level:3,year:2016,month:11,day:11,title:"Курс Brow Master \n Уровень сложности 3"},{course:1,level:1,year:2016,month:11,day:27,title:"Курс Brow Master \n Уровень сложности 1"},{course:1,level:2,year:2016,month:11,day:28,title:"Курс Brow Master \n Уровень сложности 2"},{course:1,level:3,year:2016,month:11,day:29,title:"Курс Brow Master \n Уровень сложности 3"},{course:1,level:1,year:2017,month:0,day:5,title:"Курс Brow Master \n Уровень сложности 1"},{course:1,level:2,year:2017,month:0,day:6,title:"Курс Brow Master \n Уровень сложности 2"},{course:1,level:3,year:2017,month:0,day:7,title:"Курс Brow Master \n Уровень сложности 3"},{course:1,level:1,year:2017,month:0,day:30,title:"Курс Brow Master \n Уровень сложности 1"},{course:1,level:2,year:2017,month:0,day:31,title:"Курс Brow Master \n Уровень сложности 2"},{course:1,level:3,year:2017,month:1,day:1,title:"Курс Brow Master \n Уровень сложности 3"}],r=[];return a.forEach(function(a){a.course===e&&r.push(a)}),{year:2016,month:11,day:(new Date).getDate(),db:r}}function esunCalendarInit(e,a){function r(e,a){return 33-new Date(e,a,33).getDate()}function n(e){return 0===e?6:e-1}document.getElementById(e).innerHTML="";var t=esunCalendarConfig(a),d=new Date(t.year,t.month),s=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],c={number:d.getMonth(),days:r(d.getFullYear(),d.getMonth()),title:"",year:t.year,start_day:0};c.title=s[c.number],c.start_day=n(new Date(c.year,c.number,1).getDay());var l={number:11===c.number?0:c.number+1,days:0,title:"",year:t.year,start_day:0};l.year=0===l.number?t.year+1:t.year,l.days=r(l.year,l.number),l.title=s[l.number],l.start_day=n(new Date(l.year,l.number,1).getDay());var o={number:0===t.month?11:t.month-1,days:0,year:0===t.month?t.year-1:t.year,title:""};o.days=r(o.year,o.number),o.title=s[o.number];var i=document.createElement("div"),u=document.createElement("div");u.className="calendar__header",u.innerHTML='<div class="calendar__header"><div class="calendar__header-h1"><span class="extrabold">'+s[c.number]+"</span>"+c.year+'</div><div class="calendar__header-next"><div class="icon icon-right-open"></div></div><div class="calendar__header-day">ПН</div><div class="calendar__header-day">ВТ</div><div class="calendar__header-day">СР</div><div class="calendar__header-day">ЧТ</div><div class="calendar__header-day">ПТ</div><div class="calendar__header-day calendar__weekend">СБ</div><div class="calendar__header-day calendar__weekend">ВС</div><div class="clear"></div></div>',i.appendChild(u),i.className="calendar__container calendar__month-1";for(var _=1,v=1;_<=42;){var m=document.createElement("div"),y="calendar__day";_<=c.start_day?(m.innerText=o.days-(c.start_day-_),y+=" calendar__prev-day"):_<=c.days+c.start_day?(m.innerText=_-c.start_day,c.number===t.month&&c.year===t.year&&(_-c.start_day<t.day&&(y+=" calendar__passed-day"),_-c.start_day==t.day&&(y+=" calendar__current-day")),_%7!==0&&(_+1)%7!==0||(y+=" calendar__weekend")):(m.innerText=v,v+=1,y+=" calendar__next-day"),t.db.forEach(function(e){if(c.number==e.month){if(_-c.start_day==e.day){y+=" calendar__course",m.setAttribute("data-calendar",e.title),m.setAttribute("data-course",e.course),m.setAttribute("data-level",e.level);var a=document.createElement("div");a.className="calendar__course-text",a.innerText=e.title,m.appendChild(a)}}else if(_<=c.start_day){var r=o.year,n=o.number,t=o.days-(c.start_day-_);if(e.day==t&&e.month==n&&e.year==r){y+=" calendar__course",m.setAttribute("data-calendar",e.title),m.setAttribute("data-course",e.course),m.setAttribute("data-level",e.level);var a=document.createElement("div");a.className="calendar__course-text",a.innerText=e.title,m.appendChild(a)}}}),m.className=y,i.appendChild(m),_+=1}i.className=i.className+" wow flipInY",document.getElementById(e).appendChild(i);var h=document.createElement("div"),p=document.createElement("div");p.className="calendar__header",p.innerHTML='<div class="calendar__header"><div class="calendar__header-prev"><div class="icon icon-left-open"></div></div><div class="calendar__header-h1"><span class="extrabold">'+s[l.number]+"</span>"+l.year+'</div><div class="calendar__header-day">ПН</div><div class="calendar__header-day">ВТ</div><div class="calendar__header-day">СР</div><div class="calendar__header-day">ЧТ</div><div class="calendar__header-day">ПТ</div><div class="calendar__header-day calendar__weekend">СБ</div><div class="calendar__header-day calendar__weekend">ВС</div><div class="clear"></div></div>',h.appendChild(p),h.className="calendar__container calendar__month-2";for(var _=1,v=1;_<=42;){var m=document.createElement("div"),y="calendar__day";_<=l.start_day?(m.innerText=c.days-(l.start_day-_),y+=" calendar__prev-day"):_<=l.days+l.start_day?(_%7!==0&&(_+1)%7!==0||(y+=" calendar__weekend"),m.innerText=_-l.start_day,_-l.start_day==(new Date).getDate()&&l.number===(new Date).getMonth()&&l.year===(new Date).getFullYear()&&(y+=" calendar__current-day")):(m.innerText=v,v+=1,y+=" calendar__next-day"),t.db.forEach(function(e){if(l.number==e.month){if(_-l.start_day==e.day){y+=" calendar__course",m.setAttribute("data-calendar",e.title),m.setAttribute("data-course",e.course),m.setAttribute("data-level",e.level);var a=document.createElement("div");a.className="calendar__course-text",a.innerText=e.title,m.appendChild(a)}}else if(_<=l.start_day,_>l.days+l.start_day){var r=11===l.number?l.year+1:l.year,n=11===l.number?0:l.number+1,t=v-1;if(e.day==t&&e.month==n&&e.year==r){y+=" calendar__course",m.setAttribute("data-calendar",e.title),m.setAttribute("data-course",e.course),m.setAttribute("data-level",e.level);var a=document.createElement("div");a.className="calendar__course-text",a.innerText=e.title,m.appendChild(a)}}}),m.className=y,h.appendChild(m),_+=1}h.className=h.className+" wow flipInY",h.setAttribute("data-wow-delay",".2s"),document.getElementById(e).appendChild(h);var f=document.createElement("div");f.className="clear",document.getElementById(e).appendChild(f),$(".calendar__course").click(function(e){var a=$(e.target).attr("data-course"),r=$(e.target).attr("data-level");$(".calendar__course").removeClass("calendar__day-picked"),$(this).addClass("calendar__day-picked"),courseDayPlanRender(a,r);var n="";n=$(e.target).attr("data-calendar"),document.getElementById("course-info__plan-text").innerText=n,$(".course-info__plan-wrapper").addClass("course-info__plan-wrapper-visible")}),$(".calendar__header-next").click(function(){$(".calendar__month-1").css("display","none"),$(".calendar__month-2").css("display","block")}),$(".calendar__header-prev").click(function(){$(".calendar__month-1").css("display","block"),$(".calendar__month-2").css("display","none")})}function courseDayPlanRender(e,a){document.getElementById("course-info__plan-list").innerHTML=" ";var r=new Object;if($(courses_db).each(function(a,n){n.id===parseInt(e)&&(r.course=n)}),void 0!==r.course&&void 0!==r.course.levels&&void 0!==r.course.levels[a-1]){var n="";$(r.course.levels[a-1].day_plan).each(function(e,a){n+='<div class="course-info__plan-item"><div class="course-info__plan-item-time">',n+=a.time,n+='</div><div class="course-info__plan-item-title">',n+=a.title,n+="</div></div>"}),""===n&&(n="<div>Расписание отсутствует</div>"),document.getElementById("course-info__plan-list").innerHTML=n}}function courseDayPlanClear(){document.getElementById("course-info__plan-list").innerHTML='<span class="">Чтобы узнать дневное расписание, выберите день в календаре.</span>'}function courseInfoNav(e){esunCalendarInit("calendar",parseInt(e)),esunCourseInfoRender(parseInt(e)),$(".course-info__nav-item").each(function(a,r){$(r).removeClass("course-info__nav-item-active"),parseInt($(r).attr("data-course"))===parseInt(e)&&$(r).addClass("course-info__nav-item-active")})}function courseInfoShow(e){var a=window.innerWidth<768?0:20;$(".course-info__wrapper").css("top",$(window).scrollTop()+a+"px");var r=$("#course-info__wrapper");$(r).fadeIn(150),courseInfoNav(e),courseDayPlanClear(),$(".course-info__nav-wrapper").scrollLeft(0)}function courseInfoClose(){var e=$("#course-info__wrapper");$(e).fadeOut(150)}function esunCourseInfoRender(e){var a=new Object;$(courses_db).each(function(r,n){e===n.id&&(a=n)}),$(".course-info__table-heading-0").html(a.title_html),$(".course-info__table-rightside").html(""),$(a.levels).each(function(e,a){console.log(a);var r=document.createElement("div"),n=document.createElement("div"),t=document.createElement("div"),d=document.createElement("div"),s=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),o=document.createElement("div");r.className="course-info__table-course",n.className="course-info__table-course-header",n.innerHTML='<span class="esun-color">'+a.title+"</span><br>"+a.subtitle_html,r.appendChild(n),t.className="course-info__table-course-row course-info__table-course-internally",t.innerHTML=a.internally,r.appendChild(t),d.className="course-info__table-course-row course-info__table-course-countStudents",d.innerHTML=a.countStudents,r.appendChild(d),s.className="course-info__table-course-row course-info__table-course-days",s.innerHTML=a.days,r.appendChild(s),c.className="course-info__table-course-row course-info__table-course-hours",c.innerHTML=a.hours,r.appendChild(c),l.className="course-info__table-course-row course-info__table-course-models",l.innerHTML=a.models,r.appendChild(l),o.className="course-info__table-course-row course-info__table-course-price",o.innerHTML=a.price,r.appendChild(o),$(".course-info__table-rightside").append(r)})}var courses_db;$(function(){$("#course-info__wrapper");$.ajax({url:"/js/json/coursesConfig.json",dataType:"json",success:function(e){courses_db=e}}),$(".course-info__nav-item").click(function(){courseInfoNav($(this).data("course"))}),$(".course-info__caller").click(function(){var e;e=$(this).attr("data-course")?$(this).attr("data-course"):1,courseInfoShow(e)}),$(document).click(function(e){$(e.target).closest(".course-info__wrapper, .course-info__caller").length||courseInfoClose()}),$(".course-info__close").click(function(){courseInfoClose()}),$(document).click(function(e){$(e.target).closest(".course-info__plan-wrapper, .calendar__course").length||$(".course-info__plan-wrapper").removeClass("course-info__plan-wrapper-visible")});var e=document.getElementById("course-info__nav");e.addEventListener("touchstart",function(){$(".course-info__nav-shade-animation").addClass("course-info__nav-shade-animation-hidden")},!1)});