function esunCalendarConfig(a){var e=[{course:1,year:2017,month:0,day:16},{course:1,year:2017,month:0,day:23},{course:1,year:2017,month:1,day:6},{course:1,year:2017,month:1,day:20},{course:1,year:2017,month:1,day:13},{course:1,year:2017,month:1,day:27},{course:2,year:2017,month:0,day:24},{course:2,year:2017,month:1,day:14},{course:2,year:2017,month:1,day:28},{course:3,year:2017,month:0,day:17},{course:3,year:2017,month:1,day:7},{course:3,year:2017,month:1,day:21},{course:4,year:2017,month:0,day:18},{course:4,year:2017,month:1,day:8},{course:4,year:2017,month:1,day:22},{course:5,year:2017,month:0,day:19},{course:5,year:2017,month:1,day:9},{course:5,year:2017,month:1,day:23},{course:6,year:2017,month:0,day:30},{course:6,year:2017,month:1,day:18},{course:1,year:2017,month:0,day:25,city:"Moscow"},{course:3,year:2017,month:0,day:26,city:"Moscow"},{course:4,year:2017,month:0,day:27,city:"Moscow"},{course:5,year:2017,month:0,day:28,city:"Moscow"}],r=[];return e.forEach(function(e){e.course===a&&r.push(e)}),{year:2017,month:0,day:1,db:r}}function esunCalendarInit(a,e){function r(a,e){return 33-new Date(a,e,33).getDate()}function t(a){return 0===a?6:a-1}document.getElementById(a).innerHTML="";var d=esunCalendarConfig(e),n=new Date(d.year,d.month),c=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],s={number:n.getMonth(),days:r(n.getFullYear(),n.getMonth()),title:"",year:d.year,start_day:0};s.title=c[s.number],s.start_day=t(new Date(s.year,s.number,1).getDay());var o={number:11===s.number?0:s.number+1,days:0,title:"",year:d.year,start_day:0};o.year=0===o.number?d.year+1:d.year,o.days=r(o.year,o.number),o.title=c[o.number],o.start_day=t(new Date(o.year,o.number,1).getDay());var l={number:0===d.month?11:d.month-1,days:0,year:0===d.month?d.year-1:d.year,title:""};l.days=r(l.year,l.number),l.title=c[l.number];var i=document.createElement("div"),y=document.createElement("div");y.className="calendar__header",y.innerHTML='<div class="calendar__header"><div class="calendar__header-h1" style="margin-left: 42px;"><span class="extrabold">'+c[s.number]+"</span>"+s.year+'</div><div class="calendar__header-next"><div class="icon icon-right-open"></div></div><div class="calendar__header-day">ПН</div><div class="calendar__header-day">ВТ</div><div class="calendar__header-day">СР</div><div class="calendar__header-day">ЧТ</div><div class="calendar__header-day">ПТ</div><div class="calendar__header-day calendar__weekend">СБ</div><div class="calendar__header-day calendar__weekend">ВС</div><div class="clear"></div></div>',i.appendChild(y),i.className="calendar__container calendar__month-1";for(var _=1,u=1;_<=42;){var m=document.createElement("div"),h="calendar__day";_<=s.start_day?(m.innerText=l.days-(s.start_day-_),h+=" calendar__prev-day"):_<=s.days+s.start_day?(m.innerText=_-s.start_day,s.number===d.month&&s.year===d.year&&(_-s.start_day<d.day&&(h+=" calendar__passed-day"),_-s.start_day==d.day&&(h+=" calendar__current-day")),_%7!==0&&(_+1)%7!==0||(h+=" calendar__weekend")):(m.innerText=u,u+=1,h+=" calendar__next-day"),d.db.forEach(function(a){if(s.number==a.month){if(_-s.start_day==a.day){h=h+" calendar__course"+("Moscow"===a.city?" calendar__moscow":""),m.setAttribute("data-course",a.course);var e=document.createElement("div");e.className="calendar__course-text",e.innerText=a.title,m.appendChild(e)}}else if(_<=s.start_day){var r=l.year,t=l.number,d=l.days-(s.start_day-_);if(a.day==d&&a.month==t&&a.year==r){h=h+" calendar__course"+("Moscow"===a.city?" calendar__moscow":""),m.setAttribute("data-course",a.course);var e=document.createElement("div");e.className="calendar__course-text",e.innerText=a.title,m.appendChild(e)}}}),m.className=h,i.appendChild(m),_+=1}i.className=i.className+" flipInY",document.getElementById(a).appendChild(i);var v=document.createElement("div"),p=document.createElement("div");p.className="calendar__header",p.innerHTML='<div class="calendar__header"><div class="calendar__header-prev"><div class="icon icon-left-open"></div></div><div class="calendar__header-h1" style="margin-right: 42px;"><span class="extrabold">'+c[o.number]+"</span>"+o.year+'</div><div class="calendar__header-day">ПН</div><div class="calendar__header-day">ВТ</div><div class="calendar__header-day">СР</div><div class="calendar__header-day">ЧТ</div><div class="calendar__header-day">ПТ</div><div class="calendar__header-day calendar__weekend">СБ</div><div class="calendar__header-day calendar__weekend">ВС</div><div class="clear"></div></div>',v.appendChild(p),v.className="calendar__container calendar__month-2";for(var _=1,u=1;_<=42;){var m=document.createElement("div"),h="calendar__day";_<=o.start_day?(m.innerText=s.days-(o.start_day-_),h+=" calendar__prev-day"):_<=o.days+o.start_day?(_%7!==0&&(_+1)%7!==0||(h+=" calendar__weekend"),m.innerText=_-o.start_day,_-o.start_day==(new Date).getDate()&&o.number===(new Date).getMonth()&&o.year===(new Date).getFullYear()&&(h+=" calendar__current-day")):(m.innerText=u,u+=1,h+=" calendar__next-day"),d.db.forEach(function(a){if(o.number==a.month){if(_-o.start_day==a.day){h=h+" calendar__course"+("Moscow"===a.city?" calendar__moscow":""),m.setAttribute("data-course",a.course);var e=document.createElement("div");e.className="calendar__course-text",e.innerText=a.title,m.appendChild(e)}}else if(_<=o.start_day,_>o.days+o.start_day){var r=11===o.number?o.year+1:o.year,t=11===o.number?0:o.number+1,d=u-1;if(a.day==d&&a.month==t&&a.year==r){h=h+" calendar__course"+("Moscow"===a.city?" calendar__moscow":""),m.setAttribute("data-course",a.course);var e=document.createElement("div");e.className="calendar__course-text",e.innerText=a.title,m.appendChild(e)}}}),m.className=h,v.appendChild(m),_+=1}v.className=v.className+" flipInY",v.setAttribute("data-wow-delay",".2s"),document.getElementById(a).appendChild(v);var f=document.createElement("div");f.className="clear",document.getElementById(a).appendChild(f),$(".calendar__header-next").click(function(){$(".calendar__month-1").css("display","none"),$(".calendar__month-2").css("display","block")}),$(".calendar__header-prev").click(function(){$(".calendar__month-1").css("display","block"),$(".calendar__month-2").css("display","none")})}$(function(){function a(){function a(a){var e=document.getElementById("courses-app__header-menu");n="",$(r.courses).each(function(e,r){r.category===parseInt(a)&&(n+="<li",n+=' data-course="'+r.id+'"',n+=r.id===parseInt(t)?' class="active">':">",n+=r.title,n+="</li>")}),e.innerHTML=n}function e(a){var e=document.getElementById("courses-app__course");e.innerHTML="",$(".courses-app__header-menu li").each(function(e,r){$(r).removeClass("active"),$(r).attr("data-course")==a&&$(r).addClass("active")}),$.ajax({url:"/courses-html/"+a+".html",dataType:"html",success:function(r){t=a,e.innerHTML=r,esunCalendarInit("calendar",parseInt(a))},error:function(a){}})}var d=document.getElementById("courses-app__header-tabs"),n="";$(r.categories).each(function(a,e){n+="<li",n+=' data-category="'+e.id+'"',n+=0===a?' class="active">':">",n+=e.title,n+="</li>"}),d.innerHTML=n,$("#courses-app__header-tabs").click(function(e){var r=e.target;void 0===$(r).attr("data-category")||$(r).hasClass("active")||($("#courses-app__header-tabs li").removeClass("active"),$(r).addClass("active"),a($(r).attr("data-category")))}),a(1),$(".courses-app__header-menu").click(function(a){var r=a.target;if(void 0!==$(r).attr("data-course")&&!$(r).hasClass("active")){var t=$(r).attr("data-course");e(t)}});var c=document.getElementById("courses-app__header-menu");c.addEventListener("touchstart",function(){$(".courses-app__header-menu-point").addClass("hidden")},!1),e($(".courses-app__header-menu li:nth-child(1)").attr("data-course")),$(document).click(function(a){$(a.target).hasClass("courses-app__course-program-button")&&("block"!=$("#"+$(a.target).attr("data-program")).css("display")?($(a.target).text("Скрыть программу"),$("#"+$(a.target).attr("data-program")).css("display","block")):($(a.target).text("Показать программу"),$("#"+$(a.target).attr("data-program")).css("display","none")))})}function e(){$.ajax({url:"/js/json/coursesDb.json",dataType:"json",success:function(e){r=e,a()},error:function(a){}})}var r,t;e()});